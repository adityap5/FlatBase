import{r as l,a as u,j as e,L as x,G as p,H as g}from"./main-JNmrs9IS.js";import{B as n}from"./Button-D6JpUReq.js";import{M as j}from"./Modal-PYFjVYJ2.js";import"./axios-B4uVmeYG.js";function v(){const[c,o]=l.useState([]),[a,d]=l.useState(null),[r,i]=l.useState(!1);u(),l.useEffect(()=>{(async()=>{try{const{data:t}=await p();o(t)}catch(t){console.error("Failed to fetch listings:",t)}})()},[]);const h=async()=>{if(a)try{await g(a),o(s=>s.filter(t=>t._id!==a)),i(!1),d(null)}catch(s){console.error("Failed to delete listing:",s)}},m=s=>{d(s),i(!0)};return e.jsxs("div",{className:"container mx-auto px-4 py-4 md:px-20",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your Listings"}),c.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:c.map(s=>e.jsxs("div",{className:"p-4 shadow rounded-xl hover:shadow-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:s.name}),e.jsx(x,{className:"",to:`/flat/${s._id}`,children:e.jsx(n,{name:"View"})})]}),e.jsxs("p",{className:"text-zinc-500 text-xl",children:["Location: ",s.location,", India"]}),e.jsxs("div",{className:"space-y-1 ",children:[e.jsxs("p",{children:["Guests: ",s.capacity," "]}),e.jsxs("p",{className:"text-xl",children:["Price: ₹",s.price]})]}),e.jsxs("div",{className:"flex justify-between md:gap-10",children:[e.jsx(x,{to:`/updatePage/${s._id}`,children:e.jsx(n,{name:"Update ✍🏻"})}),e.jsx(n,{name:"Delete Listing 🗑️"})]})]},s._id))}):e.jsx(e.Fragment,{children:e.jsx("p",{children:"You have no listings."})}),e.jsx("button",{onClick:()=>m(),children:" op"}),r&&e.jsx(j,{header:e.jsx("div",{className:"text-xl font-bold text-black",children:"Are you sure you want to delete?"}),footer:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>i(!1),className:"rounded-md bg-[#76ABAE] px-6 py-2 font-semibold hover:bg-gray-400/80 active:bg-gray-400/60",children:"Cancel"}),e.jsx("button",{onClick:h,className:"rounded-md bg-red-600 px-6 py-2 font-semibold hover:bg-blue-400/80 active:bg-blue-400/60",children:"Delete"})]}),isOpen:r,setIsOpen:i,children:e.jsxs("p",{className:"text-lg text-zinc-700",children:["You are about to delete the listing with ID: ",a,"."]})})]})}export{v as default};
